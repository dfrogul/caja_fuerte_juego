<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prueba 3 - Lógica Bancaria (Dígito 3)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --verde-oscuro: #022b26;
      --verde-claro: #00a481;
      --amarillo: #f3ca12;
      --blanco: #ffffff;
      --rojo: #ff4d4d;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #024038 0%, #020b0a 50%, #000000 100%);
      color: var(--blanco);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      background: rgba(2, 43, 38, 0.92);
      border-radius: 18px;
      padding: 24px 18px;
      max-width: 780px;
      width: 95%;
      box-shadow: 0 0 18px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(243, 202, 18, 0.3);
    }

    h1 {
      font-size: 1.5rem;
      text-align: center;
      margin-top: 0;
      margin-bottom: 0.5rem;
      color: var(--amarillo);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .subtitulo {
      text-align: center;
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
      color: #dfeff0;
    }

    .instrucciones {
      font-size: 0.85rem;
      background: rgba(0, 0, 0, 0.35);
      padding: 10px 12px;
      border-radius: 10px;
      border-left: 3px solid var(--verde-claro);
      margin-bottom: 1.3rem;
    }

    .pregunta {
      background: rgba(0, 0, 0, 0.45);
      border-radius: 12px;
      padding: 12px 12px 10px;
      margin-bottom: 12px;
      border: 1px solid rgba(0, 164, 129, 0.3);
    }

    .pregunta h2 {
      font-size: 1rem;
      margin: 0 0 6px;
      color: var(--amarillo);
    }

    .enunciado {
      font-size: 0.9rem;
      margin-bottom: 8px;
      line-height: 1.35;
    }

    .respuesta {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .respuesta label {
      font-size: 0.85rem;
      white-space: nowrap;
    }

    .respuesta input[type="number"] {
      flex: 1;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-size: 0.9rem;
      background: rgba(0, 0, 0, 0.6);
      color: var(--blanco);
      outline: none;
    }

    .respuesta input[type="number"]:focus {
      border-color: var(--verde-claro);
      box-shadow: 0 0 0 1px rgba(0, 164, 129, 0.6);
    }

    .feedback {
      font-size: 0.8rem;
      min-height: 1em;
    }

    .feedback.ok {
      color: var(--verde-claro);
    }

    .feedback.error {
      color: var(--rojo);
    }

    .botonera {
      text-align: center;
      margin-top: 16px;
      margin-bottom: 8px;
    }

    button {
      background: linear-gradient(135deg, var(--verde-claro), var(--amarillo));
      color: #00231b;
      border: none;
      border-radius: 999px;
      padding: 8px 22px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 0 0 10px rgba(0, 164, 129, 0.7);
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease;
    }

    button:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 0 14px rgba(243, 202, 18, 0.7);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.8);
    }

    #resultadoGeneral {
      text-align: center;
      font-size: 0.9rem;
      margin-top: 8px;
      min-height: 1.2em;
    }

    .digito {
      font-size: 1rem;
      font-weight: 700;
      color: var(--amarillo);
      margin-top: 6px;
      text-align: center;
      text-transform: uppercase;
    }

    .nota-tecnica {
      margin-top: 10px;
      font-size: 0.75rem;
      opacity: 0.7;
      text-align: center;
    }

    @media (max-width: 600px) {
      .container {
        padding: 18px 14px;
      }

      h1 {
        font-size: 1.2rem;
      }

      .enunciado {
        font-size: 0.85rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Prueba 3 · Lógica bancaria</h1>
    <div class="subtitulo">Cupones, acciones y movimientos de cuenta</div>

    <div class="instrucciones">
      Responde a las 3 preguntas. Si aciertas todas, obtendrás el
      <strong>dígito 3 del código de la caja fuerte</strong>.
      <br>Introduce solo números (sin símbolos ni puntos).
    </div>

    <!-- Pregunta 1: Bonos / cupones -->
    <div class="pregunta">
      <h2>Pregunta 1 · Bonos y cupones</h2>
      <div class="enunciado">
        Un cliente compra <strong>6 bonos</strong> con estas características:
        <ul>
          <li>Valor nominal: <strong>1.000 €</strong> cada bono</li>
          <li>Cupón anual: <strong>3,75%</strong></li>
          <li>Pago del cupón: <strong>una vez al año</strong></li>
        </ul>
        ¿Cuánto cobrará el cliente <strong>en total al año</strong> en cupones por esos 6 bonos?
      </div>
      <div class="respuesta">
        <label for="respuesta1">Respuesta (€):</label>
        <input id="respuesta1" type="number" inputmode="decimal" />
      </div>
      <div id="feedback1" class="feedback"></div>
    </div>

    <!-- Pregunta 2: Acciones -->
    <div class="pregunta">
      <h2>Pregunta 2 · Acciones</h2>
      <div class="enunciado">
        Un cliente compra <strong>85 acciones</strong> a <strong>12,40 €</strong> cada una.
        La acción sube un <strong>7%</strong> y decide vender <strong>todas</strong>.
        La comisión de venta es del <strong>0,25%</strong> sobre el importe final de la operación.
        <br><br>
        ¿Cuánto dinero <strong>recibe finalmente</strong> el cliente tras aplicar la comisión?
        <br>(Redondea a euros enteros para el juego).
      </div>
      <div class="respuesta">
        <label for="respuesta2">Respuesta (€):</label>
        <input id="respuesta2" type="number" inputmode="decimal" />
      </div>
      <div id="feedback2" class="feedback"></div>
    </div>

    <!-- Pregunta 3: Movimientos en cuenta -->
    <div class="pregunta">
      <h2>Pregunta 3 · Movimientos en cuenta</h2>
      <div class="enunciado">
        Un cliente tiene <strong>2.450 €</strong> en su cuenta. Ese mismo día realiza estas operaciones, en este orden:
        <ol>
          <li>Pago con tarjeta: <strong>−78 €</strong></li>
          <li>Ingreso en ventanilla: <strong>+320 €</strong></li>
          <li>Transferencia enviada: <strong>−250 €</strong></li>
          <li>Comisión por mantenimiento: <strong>−6 €</strong></li>
        </ol>
        ¿Cuál es el <strong>saldo final del día</strong>?
      </div>
      <div class="respuesta">
        <label for="respuesta3">Saldo final (€):</label>
        <input id="respuesta3" type="number" inputmode="decimal" />
      </div>
      <div id="feedback3" class="feedback"></div>
    </div>

    <div class="botonera">
      <button type="button" onclick="corregir()">Comprobar respuestas</button>
    </div>

    <div id="resultadoGeneral"></div>
    <div id="digito3" class="digito"></div>

    <div class="nota-tecnica">
      Nota: si el número no es entero, usa el valor redondeado a euros.
    </div>
  </div>

  <script>
    // Respuestas correctas
    const RESPUESTAS = {
      p1: 225,   // 6 bonos · 1.000 € · 3,75% = 225 €
      p2: 1125,  // Resultado final redondeado tras subida + comisión
      p3: 2436   // Saldo final tras las 4 operaciones
    };

    const DIGITO_3 = 5; // Último dígito de 225

    function normalizarNumero(valor) {
      if (valor === null || valor === undefined) return NaN;
      if (typeof valor === "string") {
        valor = valor.replace(",", ".").trim();
      }
      return Number(valor);
    }

    function corregir() {
      let aciertos = 0;

      const r1 = normalizarNumero(document.getElementById("respuesta1").value);
      const r2 = normalizarNumero(document.getElementById("respuesta2").value);
      const r3 = normalizarNumero(document.getElementById("respuesta3").value);

      const fb1 = document.getElementById("feedback1");
      const fb2 = document.getElementById("feedback2");
      const fb3 = document.getElementById("feedback3");
      const resultadoGeneral = document.getElementById("resultadoGeneral");
      const digito3 = document.getElementById("digito3");

      fb1.textContent = "";
      fb2.textContent = "";
      fb3.textContent = "";
      fb1.className = "feedback";
      fb2.className = "feedback";
      fb3.className = "feedback";
      resultadoGeneral.textContent = "";
      digito3.textContent = "";

      // Pregunta 1
      if (isNaN(r1)) {
        fb1.textContent = "Introduce un número.";
        fb1.classList.add("error");
      } else if (r1 === RESPUESTAS.p1) {
        fb1.textContent = "Correcto.";
        fb1.classList.add("ok");
        aciertos++;
      } else {
        fb1.textContent = "Incorrecto.";
        fb1.classList.add("error");
      }

      // Pregunta 2
      if (isNaN(r2)) {
        fb2.textContent = "Introduce un número.";
        fb2.classList.add("error");
      } else if (r2 === RESPUESTAS.p2) {
        fb2.textContent = "Correcto.";
        fb2.classList.add("ok");
        aciertos++;
      } else {
        fb2.textContent = "Incorrecto.";
        fb2.classList.add("error");
      }

      // Pregunta 3
      if (isNaN(r3)) {
        fb3.textContent = "Introduce un número.";
        fb3.classList.add("error");
      } else if (r3 === RESPUESTAS.p3) {
        fb3.textContent = "Correcto.";
        fb3.classList.add("ok");
        aciertos++;
      } else {
        fb3.textContent = "Incorrecto.";
        fb3.classList.add("error");
      }

      if (aciertos === 3) {
        resultadoGeneral.textContent = "Has acertado las 3 preguntas. Prueba 3 superada.";
        resultadoGeneral.style.color = "#00a481";
        digito3.textContent = "DÍGITO CONSEGUIDO: 5";
      } else {
        resultadoGeneral.textContent = "Aún no has acertado todo. Revisa las respuestas marcadas como incorrectas.";
        resultadoGeneral.style.color = "#ffcccc";
      }
    }
  </script>
</body>
</html>
