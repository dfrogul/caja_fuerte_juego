<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Prueba 3 - Lógica Bancaria (Dígito 3)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --verde-oscuro: #022b26;
      --verde-claro: #00a481;
      --amarillo: #f3ca12;
      --blanco: #ffffff;
      --rojo: #ff4d4d;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #024038 0%, #020b0a 50%, #000000 100%);
      color: var(--blanco);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      background: rgba(2, 43, 38, 0.92);
      border-radius: 18px;
      padding: 24px 18px;
      max-width: 780px;
      width: 95%;
      box-shadow: 0 0 18px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(243, 202, 18, 0.3);
    }

    h1 {
      font-size: 1.5rem;
      text-align: center;
      margin-top: 0;
      margin-bottom: 0.5rem;
      color: var(--amarillo);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .subtitulo {
      text-align: center;
      font-size: 0.9rem;
      margin-bottom: 1.5rem;
      color: #dfeff0;
    }

    .instrucciones {
      font-size: 0.85rem;
      background: rgba(0, 0, 0, 0.35);
      padding: 10px 12px;
      border-radius: 10px;
      border-left: 3px solid var(--verde-claro);
      margin-bottom: 1.3rem;
    }

    .pregunta {
      background: rgba(0, 0, 0, 0.45);
      border-radius: 12px;
      padding: 12px 12px 10px;
      margin-bottom: 12px;
      border: 1px solid rgba(0, 164, 129, 0.3);
    }

    .pregunta h2 {
      font-size: 1rem;
      margin: 0 0 6px;
      color: var(--amarillo);
    }

    .enunciado {
      font-size: 0.9rem;
      margin-bottom: 8px;
      line-height: 1.35;
    }

    .respuesta {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .respuesta label {
      font-size: 0.85rem;
      white-space: nowrap;
    }

    .respuesta input[type="number"] {
      flex: 1;
      padding: 6px 8px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      font-size: 0.9rem;
      background: rgba(0, 0, 0, 0.6);
      color: var(--blanco);
      outline: none;
    }

    .respuesta input[type="number"]:focus {
      border-color: var(--verde-claro);
      box-shadow: 0 0 0 1px rgba(0, 164, 129, 0.6);
    }

    .feedback {
      font-size: 0.8rem;
      min-height: 1em;
    }

    .feedback.ok {
      color: var(--verde-claro);
    }

    .feedback.error {
      color: var(--rojo);
    }

    .botonera {
      text-align: center;
      margin-top: 16px;
      margin-bottom: 8px;
    }

    button {
      background: linear-gradient(135deg, var(--verde-claro), var(--amarillo));
      color: #00231b;
      border: none;
      border-radius: 999px;
      padding: 8px 22px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      box-shadow: 0 0 10px rgba(0, 164, 129, 0.7);
      transition: transform 0.1s ease, box-shadow 0.1s ease, filter 0.1s ease;
      margin: 6px;
    }

    button:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 0 14px rgba(243, 202, 18, 0.7);
    }

    button:active {
      transform: translateY(0);
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.8);
    }

    #resultadoGeneral {
      text-align: center;
      font-size: 0.9rem;
      margin-top: 8px;
      min-height: 1.2em;
    }

    .digito {
      font-size: 1rem;
      font-weight: 700;
      color: var(--amarillo);
      margin-top: 6px;
      text-align: center;
      text-transform: uppercase;
    }

    .nota-tecnica {
      margin-top: 10px;
      font-size: 0.75rem;
      opacity: 0.7;
      text-align: center;
    }

  </style>
</head>

<body>
  <div class="container">
    <h1>Prueba 3 · Lógica bancaria</h1>
    <div class="subtitulo">Cupones, acciones y movimientos de cuenta</div>

    <div class="instrucciones">
      Responde a las 3 preguntas. Si aciertas todas, obtendrás el
      <strong>dígito 3 del código de la caja fuerte</strong>.
      <br>Introduce solo números (sin símbolos ni puntos).
    </div>

    <!-- Preguntas -->
    <div class="pregunta">
      <h2>Pregunta 1 · Bonos y cupones</h2>
      <div class="enunciado">
        Un cliente compra <strong>6 bonos</strong> de 1.000 € con cupón del <strong>3,75%</strong>.
        ¿Cuánto cobra al año en cupones?
      </div>
      <div class="respuesta">
        <label>Respuesta (€):</label>
        <input id="respuesta1" type="number">
      </div>
      <div id="feedback1" class="feedback"></div>
    </div>

    <div class="pregunta">
      <h2>Pregunta 2 · Acciones</h2>
      <div class="enunciado">
        Compra <strong>85 acciones</strong> a 12,40 €. Suben un 7% y las vende.
        Comisión de venta: <strong>0,25%</strong>.
        <br>¿Cuánto recibe finalmente? (redondea a euros)
      </div>
      <div class="respuesta">
        <label>Respuesta (€):</label>
        <input id="respuesta2" type="number">
      </div>
      <div id="feedback2" class="feedback"></div>
    </div>

    <div class="pregunta">
      <h2>Pregunta 3 · Movimientos en cuenta</h2>
      <div class="enunciado">
        Saldo inicial: <strong>2.450 €</strong>.
        Movimientos:
        <ul>
          <li>–78 €</li>
          <li>+320 €</li>
          <li>–250 €</li>
          <li>–6 €</li>
        </ul>
        ¿Saldo final?
      </div>
      <div class="respuesta">
        <label>Saldo (€):</label>
        <input id="respuesta3" type="number">
      </div>
      <div id="feedback3" class="feedback"></div>
    </div>

    <div class="botonera">
      <button onclick="corregir()">Comprobar</button>
      <button onclick="resetear()" class="secondary">Intentar de nuevo</button>
    </div>

    <div id="resultadoGeneral"></div>
    <div id="digito3" class="digito"></div>

    <div class="nota-tecnica">
      Nota: si el número no es entero, usa el valor redondeado.
    </div>
  </div>

  <script>
    const RESPUESTAS = { p1: 225, p2: 1125, p3: 2436 };
    const DIGITO_3 = 5;

    function normalizarNumero(x) {
      if (x === null || x === undefined) return NaN;
      return Number(x.toString().replace(",", ".").trim());
    }

    function corregir() {
      const r1 = normalizarNumero(respuesta1.value);
      const r2 = normalizarNumero(respuesta2.value);
      const r3 = normalizarNumero(respuesta3.value);

      // VALIDACIÓN DE CAMPOS VACÍOS
      if (respuesta1.value === "" || respuesta2.value === "" || respuesta3.value === "") {
        resultadoGeneral.textContent = "Completa las 3 respuestas antes de comprobar.";
        resultadoGeneral.style.color = "#ff4d4d";
        digito3.textContent = "";
        return;
      }

      let aciertos = 0;

      // Reset feedback
      [feedback1, feedback2, feedback3].forEach(f => {
        f.textContent = "";
        f.className = "feedback";
      });

      // Corrección P1
      if (r1 === RESPUESTAS.p1) {
        feedback1.textContent = "Correcto.";
        feedback1.classList.add("ok");
        aciertos++;
      } else {
        feedback1.textContent = "Incorrecto.";
        feedback1.classList.add("error");
      }

      // Corrección P2
      if (r2 === RESPUESTAS.p2) {
        feedback2.textContent = "Correcto.";
        feedback2.classList.add("ok");
        aciertos++;
      } else {
        feedback2.textContent = "Incorrecto.";
        feedback2.classList.add("error");
      }

      // Corrección P3
      if (r3 === RESPUESTAS.p3) {
        feedback3.textContent = "Correcto.";
        feedback3.classList.add("ok");
        aciertos++;
      } else {
        feedback3.textContent = "Incorrecto.";
        feedback3.classList.add("error");
      }

      // Resultado general
      if (aciertos === 3) {
        resultadoGeneral.textContent = "Has acertado las 3 preguntas. Prueba 3 superada.";
        resultadoGeneral.style.color = "#00a481";
        digito3.textContent = "DÍGITO CONSEGUIDO: " + DIGITO_3;
      } else {
        resultadoGeneral.textContent = "Aún no está todo correcto. Revisa las respuestas incorrectas.";
        resultadoGeneral.style.color = "#ffcccc";
        digito3.textContent = "";
      }
    }

    function resetear() {
      // Limpiar campos
      respuesta1.value = "";
      respuesta2.value = "";
      respuesta3.value = "";

      // Limpiar mensajes
      [feedback1, feedback2, feedback3].forEach(f => {
        f.textContent = "";
        f.className = "feedback";
      });

      resultadoGeneral.textContent = "";
      digito3.textContent = "";
    }
  </script>
</body>
</html>
